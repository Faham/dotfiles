#!/bin/bash

USER=faham

sudo usermod -G disk --append $USER

[ -f /etc/gdm/custom.conf ] && sudo sed  -i "s/^#WaylandEnable=false/WaylandEnable=false/" /etc/gdm/custom.conf
sudo patch -r - /etc/sudoers patches/sudoers.patch
sudo patch -r - /etc/pacman.conf patches/pacman.conf
sudo cp patches/motd /etc/motd

PACKAGES="
bashrun            p7zip                   vlc
cmake              pcmanfm                 wget
conky              pm-utils                xclip
ctags              pulseaudio              xdotool
cups               python-pip              xf86-input-synaptics
downgrade          python2                 xf86-video-intel
evince             python2-pip             xloadimage
exfat-utils        qalculate-gtk           xorg-apps
festival-us        remmina                 xorg-server
fluxbox            samba                   xorg-server-utils
freerdp            scrot                   xorg-xinit
ghostscript        sshfs                   xorg-xmessage
gimp               terminator              xosd
git                tk                      xscreensaver
goldendict         tmux                    xterm
gparted            ttf-bitstream-vera      yaourt
gpicview           ttf-dejavu              youtube-dl
gsfonts            ttf-freefont            zip
gvfs               ttf-inconsolata         zsh
htop               ttf-liberation
imagemagick        ttf-linux-libertine
libimobiledevice   ttf-ubuntu-font-family
libva-intel-driver unclutter
libvdpau-va-gl     unzip
linux-headers      vim
mesa-libgl         vim-spell-en
nmap               virtualbox
ntfs-3g            virtualbox-guest-utils
openssh            virtualbox-host-dkms
"

sudo pacman -Syy
sudo pacman -S $PACKAGES --noconfirm

~/bin/set-python 2.7
sudo pip install twisted argparse
~/bin/set-python 3.5

sudo ln -s /etc/fonts/conf.avail/70-no-bitmaps.conf /etc/fonts/conf.d

# required groups membership for cups administration at http://http://127.0.0.1:631/
sudo gpasswd -a fahamne lp
sudo gpasswd -a fahamne sys

yaourt -S google-chrome sublime-text-dev viber acroread

git submodule update --init --recursive
cd ~/.vim/bundle/YouCompleteMe && ./install.py

[ -f /usr/bin/subl ] || sudo ln -s /usr/bin/subl3 /usr/bin/subl
[ -f /etc/ssh/sshd_config ] && sudo patch -r - /etc/ssh/sshd_config patches/sshd_config.patch
