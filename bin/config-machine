#!/bin/bash

USER=faham

sudo usermod -G disk --append $USER

[ -f /etc/gdm/custom.conf ] && sudo sed  -i "s/^#WaylandEnable=false/WaylandEnable=false/" /etc/gdm/custom.conf
sudo patch -r - /etc/sudoers patches/sudoers.patch
sudo patch -r - /etc/pacman.conf patches/pacman.conf
sudo cp patches/motd /etc/motd

sudo pacman -Syy

sudo pacman -S fluxbox xosd terminator zsh pcmanfm vlc        \
unclutter conky xscreensaver goldendict yaourt xdotool        \
xterm bashrun git vim xorg-server xorg-apps xorg-server-utils \
xf86-video-intel xf86-input-synaptics mesa-libgl xorg-xinit   \
ttf-dejavu htop openssh wget pulseaudio cmake python2 evince  \
ctags gpicview zip unzip tk gvfs linux-headers virtualbox     \
virtualbox-guest-utils virtualbox-host-dkms exfat-utils scrot \
gimp imagemagick sshfs samba ntfs-3g pm-utils gparted         \
libva-intel-driver libvdpau-va-gl cups ghostscript gsfonts    \
libimobiledevice qalculate-gtk xorg-xmessage                  \
ttf-bitstream-vera ttf-inconsolata ttf-ubuntu-font-family     \
ttf-dejavu ttf-freefont ttf-linux-libertine ttf-liberation    \
festival-us remmina freerdp nmap downgrade tmux               \
python2-pip python-pip                                        \
--noconfirm

~/bin/set-python 2.7
sudo pip install twisted argparse
~/bin/set-python 3.5

sudo ln -s /etc/fonts/conf.avail/70-no-bitmaps.conf /etc/fonts/conf.d

# required groups membership for cups administration at http://http://127.0.0.1:631/
sudo gpasswd -a fahamne lp
sudo gpasswd -a fahamne sys

yaourt -S google-chrome sublime-text-dev viber acroread

git submodule update --init --recursive
cd ~/.vim/bundle/YouCompleteMe && ./install.py

[ -f /usr/bin/subl ] || sudo ln -s /usr/bin/subl3 /usr/bin/subl
[ -f /etc/ssh/sshd_config ] && sudo patch -r - /etc/ssh/sshd_config patches/sshd_config.patch
