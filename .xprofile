#!/bin/sh

# Set TERM with 256-color support if available
if [ -e /usr/share/terminfo/x/xterm-256color ]; then
    export TERM='xterm-256color'
else
    export TERM='xterm-color'
fi

# Environment variables
export PATH="$PATH:$HOME/.scripts"
export BROWSER=vivaldi-stable
export EDITOR=nvim
export SHELL=/usr/bin/zsh
export FILES=pcmanfm
export PLAYER=vlc
export VISUAL="nvim"

# Run xbindkeys if installed
if command -v xbindkeys >/dev/null 2>&1; then
    xbindkeys
fi

# Keyboard settings
xset r rate 170 50
xset -b
setxkbmap -model pc104 -layout us,ir -option grp:switch,grp:alt_shift_toggle,grp_led:scroll

# Hide cursor after idle (use unclutter-xfixes for better performance; install with sudo pacman -S unclutter-xfixes)
if command -v unclutter >/dev/null 2>&1; then
    unclutter -idle 2 -jitter 10 -root &
fi

# Background settings (use feh for modern image handling; install with sudo pacman -S feh)
xsetroot -solid "#110011"
if [ -f ~/.bg ] && command -v feh >/dev/null 2>&1; then
    feh --bg-fill ~/.bg
fi

# Optional: Screen locker (ensure 'lockscreen' script exists or use i3lock)
# xautolock -detectsleep -time 6 -locker "lockscreen off" -nowlocker "lockscreen" &

# Custom script if needed
# detect_displays
